<div class="posts_list">
	<% @posts.each do |post| %>
	  <div class="post small">
		<div class="image">
		<%# TODO: Add vote up/down arrows (on hover?) %>
		<% if post.photo.exists? then %>
		<%= link_to(image_tag(post.photo.url(:small), :alt => post.title), post) %>
		<% else %>
		No photos here
		<% end %>
		</div>
		<div class="info">
			<h3 class="title"><%= post.title %></h3>
			<span class="author">by <%= link_to post.user.username, name_user_path(post.user.username) %><%# TODO: Check if user exists to stop errors on deleted accounts %></span>
			<%= render :partial => 'posts/ranking', :locals => { :post => post } %>
		
			<div class="actions">
				<%# TODO: Add tooltip to make the plus more obvious %>
				<%= link_to content_tag(:span, 'New Derivative'), new_child_post_path(post), :class => 'new_deriv' %>
	    		<%# link_to content_tag(:span, 'Edit'), edit_post_path(post), :class => 'edit' %>
			</div>
	  	</div>
	  </div>
	<% end %>

	<%= paginate @posts %>
</div>
